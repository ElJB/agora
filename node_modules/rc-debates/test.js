var Debates = require('./index.js'),
	assert = require('assert');

var debates = new Debates("http://www.nosdeputes.fr/14/dossier/8310", "Exposition aux ondes électromagnétiques");

debates.on("structured", function(){
	assert(debates._sections.presentations.length);
	
	console.log("rc-debates test: OK");
});

debates.on("err", function(err){
	console.log(err.stack);
});

// var debates = new Debates("http://www.nosdeputes.fr/14/dossier/8077", "Agriculture alimentation et forêt");

// debates.on("structured", function(){
// 	assert(debates._sections.presentations.length);
// 	assert(debates._sections.presentations[0].name == "Claude Bartolone");
// 	assert(debates._sections.presentations[0].group == "SRC");
// 	assert(debates._sections.presentations[0].text.match("La parole est à M. le ministre de l’agriculture, de l’agroalimentaire et de la forêt"));
// 	assert(debates._sections.presentations.length == 42);

// 	assert(Object.keys(debates.interventionTree).length == 8);

// 	var tree = debates.interventionTree;

// 	for( group in tree ){
// 		for( orator in tree[group] ){
// 			for( section in tree[group][orator])
// 				assert(tree[group][orator][section]);
// 		}
// 	}

// 	console.log("rc-debates test: OK");
// });

// debates.on("err", function(err){
// 	console.log(err.stack);
// });

